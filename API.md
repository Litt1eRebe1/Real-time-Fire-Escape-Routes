# API reference: RTFE
The API is split into 3 endpoints namely Database, Building and Building Generation 
each being accessible at ... respectively. Each endpoint serves a specific purpose in the system and will be explained in detail below.

```java
 http://localhost:8080/database
```
```java
 http://localhost:8080/building
```
```java
 http://localhost:8080/buildingGeneration
```

The services will be accessed by making use of POST requests to our system, the system assumes that error checking is done on the front end to reduce overhead on the backend. The building endpoint will be used to trigger or obtain people related data to use in either the Application or the Unity simulation.



Thus far supported/planned requests at each endpoints are:

- <u>Database</u>
  - Login
  - Register
  - Get Buildings

- <u>Building</u>
  - Trigger (planned)
  - Get People Data (all people data for unity)
  - Get Person Data (For use by the application)
- <u>Building Generation</u>
  - Build 
  - Get Building Data (Only used for unity visualization)



### Quick links:

<ul>  
  <li><a href="https://github.com/cos301-2019-se/Real-time-Fire-Escape-Routes/new/master/API.md#Database" target="_blank">Database</a></li>
  <li><a href="https://github.com/cos301-2019-se/Real-time-Fire-Escape-Routes/blob/master/API.md#rfte-real-time-fire-escape-api" target="_blank">RFTE API</a></li>
</ul>   

## Database
The service will be accessed by making use of POST requests to our system,
the system assumes that error checking is done on the front end to reduce overhead on the backend

```java
  http://localhost:8080/database 
```
@return: Will return a JSON object with contains the following attributes, status, timestamp and message
>   **status**: will return either true or false     
>   **message**: will return a message notifying whether or not the function succeeded or why it failed   
>   for additional info please consult our table below  

@params:  
>**name**: The username of the user (or email)   
>**pass**: The password generated by the system for that user  
>**Type**: the type of notification to be done    
>
>**valid types are**: login, register

### Example Json
login  
```javascript
{
    "type": "login",
     "user": {{Username}},
     "pass":{{pass}}
}
```
register  
```javascript
{
    "type": "register",
     "user": {{Username}},
     "pass":{{pass}}
}
```
#### Return message examples:
```JSON
{
    "status": true,
    "msg": "detailed information found here"
}
```
### example usage:   
jquery  
```javascript
  $.ajax({
      url: "http://localhost:8080",
      type: "POST",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      data: JSON.stringify({
          type: 'login',
          name: $('#username').val(),
          pass: $('#password').val()
      }),
      success: function(data){
          //Process data
      }
  })
```

---
## RFTE - Building Generation

```
 http://localhost:8080/buildingGeneration
```
@return: Will return a json object with contains the following attributes, status, timestamp and message
>   **rooms**: an Array of Room objects   
>   **doors**: an Array of Door objects   
>   **people**: an Array of People objects   
>   **status**: will return either true or false     

@params:  
>**Type**: the type of notification to be done    
>
>**valid types are**: buildingData
>Please consult the JSON example to see what data is required  

### Example JSON

```JSON
{
	"type":"buildingData"
}
```

#### Example Response

```JSON
{
    "doors": "0 * 2.0 * 12.6,0.00 * 2.0 * 0.0,5.20 * 2.0 * 24.0,5.20 * 2.0 * 2.0,4.50 * 			2.0 * 6.0,4.50 * 2.0 * 10.0,4.50 * 2.0 * 2.0,5.80 * 2.0 * 6.0,5.80 * 2.0 * 				10.0,5.80 * 2.0 * 14.0,5.80 * 2.0 * 18.0,5.80 * 2.0 * 22.0,5.80 * 2.0 * 				13.3,0.8750 * 2.0 * 13.3,3.10 * 2.0 * 22.0,4.50 * 2.0 * 19.0,4.5",
    "rooms": "0 * 0.0,0.0 % 0.0,4.5 % 4.0,4.5 % 4.0,0.0 - 0 * 4.0,0.0 % 4.0,4.5 % 8.0,4.5 				% 8.0,0.0 - 0 * 8.0,0.0 % 8.0,4.5 % 12.0,4.5 % 12.0,0.0 - 0 * 0.0,5.8 % 			4.0,5.8 % 4.0,10.0 - 0 * 4.0,5.8 % 8.0,5.8 % 8.0,10.0 % 4.0,10.0 - 0 * 					8.0,5.8 % 12.0,5.8 % 12.0,10.0 % 8.0,10.0 - 0 * 12.0,5.8 % 16.0,5.8 % 					16.0,10.0 % 12.0,10.0 - 0 * 16.0,5.8 % 20.0,5.8 % 20.0,10.0 % 16.0,10.0 - 0 * 			  20.0,5.8 % 24.0,5.8 % 24.0,10.0 % 20.0,10.0 - 0 * 13.3,0.0 % 17.0,0.0 % 			    17.0,1.7 % 13.3,1.7 - 0 * 13.3,1.7 % 13.3,4.5 % 17.0,4.5 % 17.0,1.7 - 0 * 				17.0,1.7 % 17.0,4.5 % 24.0,4.5 % 24.0,1.7 - 0 * 0.0,4.5 % 0.0,5.8 % 24.0,5.8 			 % 24.0,4.5 % 13.3,4.5 % 13.3,0.0 % 12.0,0.0 % 12.0,4.5 - 0 * 0.0,0.0 % 				0.0,5.8 % 4.0,10.0 % 24.0,10.0 % 24.0,1.7 % 17.0,1.7 % 17.0,0.0",
    "numberFloors": 1,
    "status": true
}
```

